üéÆ –ò–≥—Ä–æ–≤–∞—è –º–µ—Ö–∞–Ω–∏–∫–∞: –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ API (future-proof)
üéØ –¶–µ–ª–∏ –º–µ—Ö–∞–Ω–∏–∫–∏

–°—Ç–∏–º—É–ª–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–≥—É–ª—è—Ä–Ω–æ—Å—Ç—å (–µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –≤—ã–Ω–æ—Å—ã)

–°–æ–∑–¥–∞—Ç—å –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω—É—é –º–æ—Ç–∏–≤–∞—Ü–∏—é

–£–ø—Ä–∞–≤–ª—è—Ç—å –¥–æ—Å—Ç—É–ø–æ–º –∫ —Ñ—É–Ω–∫—Ü–∏—è–º / —Ü–µ–Ω–∞–º

–°–µ–≥–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∞—É–¥–∏—Ç–æ—Ä–∏—é –Ω–µ—è–≤–Ω–æ, —á–µ—Ä–µ–∑ –ø–æ–≤–µ–¥–µ–Ω–∏–µ

1Ô∏è‚É£ –£—Ä–æ–≤–Ω–∏ (Levels)
üì¶ –°—É—â–Ω–æ—Å—Ç—å: UserLevel
UserLevel {
  id: uuid
  userId: uuid
  levelId: uuid
  achievedAt: timestamp
  current: boolean
}

üì¶ –°—É—â–Ω–æ—Å—Ç—å: Level
Level {
  id: uuid
  code: string          // bronze, silver, gold, platinum
  nameKey: string
  minPoints: int        // –∏–ª–∏ minActions
  benefits: jsonb       // —á—Ç–æ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è
  createdAt
}

–ü—Ä–∏–º–µ—Ä benefits:
{
  "discount_percent": 5,
  "shabbat_access": true,
  "priority_courier": true,
  "partner_offers": ["cleaning", "water_delivery"]
}


‚ö†Ô∏è –í–∞–∂–Ω–æ:
benefits ‚Äî –¥–∞–Ω–Ω—ã–µ, –∞ –Ω–µ –ª–æ–≥–∏–∫–∞
(—á—Ç–æ–±—ã –ø–æ—Ç–æ–º –ª–µ–≥–∫–æ –º–µ–Ω—è—Ç—å –ø—Ä–∞–≤–∏–ª–∞)

2Ô∏è‚É£ –û—á–∫–∏ / –ø—Ä–æ–≥—Ä–µ—Å—Å (Progress system)

–ù–µ –ø—Ä–∏–≤—è–∑—ã–≤–∞–π—Å—è –∂—ë—Å—Ç–∫–æ –∫ ¬´–∫–æ–ª–∏—á–µ—Å—Ç–≤—É –≤—ã–Ω–æ—Å–æ–≤¬ª.
–õ—É—á—à–µ ‚Äî —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ –æ—á–∫–∏.

üì¶ UserProgress
UserProgress {
  userId: uuid
  totalPoints: int
  updatedAt
}

üì¶ ProgressTransaction
ProgressTransaction {
  id: uuid
  userId: uuid
  points: int
  reason: string            // daily_order, streak_7, shabbat_order
  referenceType: string
  referenceId: uuid
  createdAt
}

–ü—Ä–∏–º–µ—Ä—ã –Ω–∞—á–∏—Å–ª–µ–Ω–∏–π:

–æ–±—ã—á–Ω—ã–π –≤—ã–Ω–æ—Å: +1

7 –¥–Ω–µ–π –ø–æ–¥—Ä—è–¥: +5

—à–∞–±–±–∞—Ç: +2

–º–µ—Å—è—Ü –±–µ–∑ –ø—Ä–æ–ø—É—Å–∫–æ–≤: +15

3Ô∏è‚É£ –°—Ç—Ä–∏–∫–∏ (–æ—á–µ–Ω—å –º–æ—â–Ω—ã–π retention-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç)
üì¶ UserStreak
UserStreak {
  userId: uuid
  type: string           // daily_cleanup
  currentCount: int
  maxCount: int
  lastActionDate: date
}


üìå –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:

–±–æ–Ω—É—Å—ã

–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ—á–∫–∏

–∑–∞—â–∏—Ç–∞ –æ—Ç –æ—Ç—Ç–æ–∫–∞

4Ô∏è‚É£ –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Ñ—É–Ω–∫—Ü–∏–π (Feature Unlocks)

–≠—Ç–æ –∫–ª—é—á–µ–≤–∞—è —à—Ç—É–∫–∞, —Ä–∞–¥–∏ –∫–æ—Ç–æ—Ä–æ–π –≤—Å—ë –∏ –¥–µ–ª–∞–µ—Ç—Å—è.

üì¶ Feature
Feature {
  id: uuid
  code: string          // shabbat_orders, bonus_marketplace
  descriptionKey: string
}

üì¶ UserFeatureAccess
UserFeatureAccess {
  userId: uuid
  featureId: uuid
  grantedBy: 'level' | 'manual' | 'promo'
  expiresAt: timestamp | null
}


üìå –ü—Ä–∏–º–µ—Ä:

—à–∞–±–±–∞—Ç ‚Üí –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ —Å Silver

–±–æ–Ω—É—Å—ã ‚Üí —Å Bronze

–ø–∞—Ä—Ç–Ω—ë—Ä—Å–∫–∏–µ –æ—Ñ—Ñ–µ—Ä—ã ‚Üí Gold+

5Ô∏è‚É£ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Event-based –º–æ–¥–µ–ª—å—é (–û–ß–ï–ù–¨ –í–ê–ñ–ù–û)

–ö–∞–∂–¥–æ–µ –∏–≥—Ä–æ–≤–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ ‚Äî event

–ü—Ä–∏–º–µ—Ä—ã:
progress.points_earned
level.upgraded
streak.updated
feature.unlocked


–≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç:

–∞–Ω–∞–ª–∏—Ç–∏–∫—É

—Ç—Ä–∏–≥–≥–µ—Ä–Ω—ã–µ –æ—Ñ—Ñ–µ—Ä—ã

ML –ø–æ–∑–∂–µ

–ø–∞—Ä—Ç–Ω—ë—Ä—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

6Ô∏è‚É£ –°–µ–≥–º–µ–Ω—Ç–∞—Ü–∏—è —á–µ—Ä–µ–∑ –∏–≥—Ä—É (—Å–∫—Ä—ã—Ç–∞—è –º–∞–≥–∏—è)

–¢—ã –Ω–µ –≥–æ–≤–æ—Ä–∏—à—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é, —á—Ç–æ –æ–Ω –≤ —Å–µ–≥–º–µ–Ω—Ç–µ.
–¢—ã –ø—É—Å–∫–∞–µ—à—å –µ–≥–æ —Ç—É–¥–∞ —á–µ—Ä–µ–∑ –ø–æ–≤–µ–¥–µ–Ω–∏–µ.

–ü—Ä–∏–º–µ—Ä—ã —Ñ–ª–∞–≥–æ–≤:

high_discipline_user

routine_loyal

premium_ready

shabbat_lover

–ò –æ–Ω–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã—Å—Ç–∞–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑:

—É—Ä–æ–≤–Ω–∏

—Å—Ç—Ä–∏–∫–∏

—á–∞—Å—Ç–æ—Ç—É –¥–µ–π—Å—Ç–≤–∏–π