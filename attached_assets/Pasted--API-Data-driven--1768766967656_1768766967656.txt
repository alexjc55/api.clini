üéØ –¶–µ–ª—å –¥–æ—Ä–∞–±–æ—Ç–æ–∫ API

–ó–∞–ª–æ–∂–∏—Ç—å —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç –¥–ª—è:

Data-driven –ø—Ä–æ–¥—É–∫—Ç–∞ (–ø–æ–≤–µ–¥–µ–Ω–∏–µ, –ø–ª–∞—Ç–µ–∂–µ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å, —Ä–∏—Ç–º –∂–∏–∑–Ω–∏)

LTV > CAC —á–µ—Ä–µ–∑ –ø–æ–¥–ø–∏—Å–∫–∏, –±–æ–Ω—É—Å—ã, –∞–ø—Å–µ–ª–ª—ã

Marketplace / super-app –ª–æ–≥–∏–∫–∏

–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–æ–≥–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è

–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø—Ä–æ–¥–∞—Ç—å –∫–æ–º–ø–∞–Ω–∏—é / –¥–æ–ª—é –Ω–µ –∫–∞–∫ ¬´—Å–µ—Ä–≤–∏—Å –º—É—Å–æ—Ä–∞¬ª, –∞ –∫–∞–∫ –ø–ª–∞—Ç—Ñ–æ—Ä–º—É urban services

1Ô∏è‚É£ Event-based –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (–ö–†–ò–¢–ò–ß–ù–û)

–£ —Ç–µ–±—è —É–∂–µ –µ—Å—Ç—å AuditLog ‚Äî —ç—Ç–æ –æ—Ç–ª–∏—á–Ω–æ, –Ω–æ —ç—Ç–æ –Ω–µ events.

üîπ –ó–∞—á–µ–º

–ü–æ–≤–µ–¥–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

–¢—Ä–∏–≥–≥–µ—Ä—ã (–±–æ–Ω—É—Å—ã, –æ—Ñ—Ñ–µ—Ä—ã, —Å–µ–≥–º–µ–Ω—Ç—ã)

ML / —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –≤ –±—É–¥—É—â–µ–º

–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ø–∞—Ä—Ç–Ω—ë—Ä–æ–≤ –±–µ–∑ –ª–æ–º–∞ API

üîπ –ß—Ç–æ –¥–æ–±–∞–≤–∏—Ç—å
üì¶ –ù–æ–≤–∞—è —Å—É—â–Ω–æ—Å—Ç—å: Event
Event {
  id: uuid
  type: string              // order.created, order.completed, bonus.earned
  actorType: 'client' | 'courier' | 'system'
  actorId: uuid | null
  entityType: string | null // order, subscription, bonus
  entityId: uuid | null
  payload: jsonb            // –ª—é–±—ã–µ –¥–∞–Ω–Ω—ã–µ
  createdAt: timestamp
}

üìå –ü—Ä–∏–º–µ—Ä—ã —Å–æ–±—ã—Ç–∏–π
order.created
order.completed
order.completed.shabbat
subscription.started
subscription.paused
bonus.earned
bonus.redeemed
courier.batch.completed
user.segment.entered

üîå –ì–µ–Ω–µ—Ä–∞—Ü–∏—è

–°–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –ø—Ä–∏ –¥–µ–π—Å—Ç–≤–∏–∏

–ò–ª–∏ async (—á–µ—Ä–µ–∑ –æ—á–µ—Ä–µ–¥—å –ø–æ–∑–∂–µ)

‚ö†Ô∏è –í–∞–∂–Ω–æ:
AuditLog = —é—Ä–∏–¥–∏—á–µ—Å–∫–∏–π –ª–æ–≥
Event = –ø—Ä–æ–¥—É–∫—Ç–æ–≤–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

–ù–ï —Å–º–µ—à–∏–≤–∞—Ç—å

2Ô∏è‚É£ –ò—Å—Ç–æ—Ä–∏—è –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (Behavior History)

AuditLog ‚Äî –¥–ª—è ERP
–¢–µ–±–µ –Ω—É–∂–Ω–∞ Customer Timeline

üîπ –ù–æ–≤–∞—è —Å—É—â–Ω–æ—Å—Ç—å: UserActivity
UserActivity {
  id: uuid
  userId: uuid
  eventType: string
  referenceType: string | null
  referenceId: uuid | null
  metadata: jsonb
  createdAt: timestamp
}

üìå –ü—Ä–∏–º–µ—Ä—ã

–µ–∂–µ–¥–Ω–µ–≤–Ω—ã–π –≤—ã–Ω–æ—Å

–ø—Ä–æ–ø—É—Å–∫ –¥–Ω—è

–æ—Ç–º–µ–Ω–∞

–≤—ã–∑–æ–≤ –≤ —à–∞–±–±–∞—Ç

—á–∞–µ–≤—ã–µ

–≤—Ö–æ–¥ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

üëâ –≠—Ç–æ –∑–æ–ª–æ—Ç–æ –¥–ª—è —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏–∏

3Ô∏è‚É£ –°–µ–≥–º–µ–Ω—Ç—ã –∏ —Ñ–ª–∞–≥–∏ (Feature / Segment Flags)

–¢—ã –æ–±—è–∑–∞–Ω –∑–∞–ª–æ–∂–∏—Ç—å —ç—Ç–æ —Å–µ–π—á–∞—Å, –¥–∞–∂–µ –µ—Å–ª–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å.

üîπ –°—É—â–Ω–æ—Å—Ç—å: UserFlag
UserFlag {
  id: uuid
  userId: uuid
  key: string          // high_ltv, shabbat_user, price_sensitive
  value: boolean
  source: 'system' | 'manual' | 'ml'
  createdAt: timestamp
}

üîπ –ü—Ä–∏–º–µ—Ä—ã —Ñ–ª–∞–≥–æ–≤

daily_user

shabbat_orders

high_frequency

no_tips

premium_candidate

churn_risk

üìå –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:

—Ä–∞–∑–Ω—ã–µ —Ü–µ–Ω—ã

—Ä–∞–∑–Ω—ã–µ –±–æ–Ω—É—Å—ã

—Ä–∞–∑–Ω—ã–µ –æ—Ñ—Ñ–µ—Ä—ã

—Ä–∞–∑–Ω—ã–µ –ø–∞—Ä—Ç–Ω—ë—Ä—Å–∫–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è

4Ô∏è‚É£ –ë–æ–Ω—É—Å—ã ‚Äî –∫–∞–∫ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è —ç–∫–æ–Ω–æ–º–∏–∫–∞ (–ù–ï –ø—Ä–æ—Å—Ç–æ –±–∞–ª–ª—ã)

–¢—ã –∞–±—Å–æ–ª—é—Ç–Ω–æ –ø—Ä–∞–≤ ‚Äî –±–æ–Ω—É—Å—ã ‚â† –º–∞—Ä–∫–µ—Ç–∏–Ω–≥
–ë–æ–Ω—É—Å—ã = –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –≤–∞–ª—é—Ç–∞

üîπ –°—É—â–Ω–æ—Å—Ç–∏
üéÅ BonusAccount
BonusAccount {
  userId: uuid
  balance: int
  updatedAt: timestamp
}

üìú BonusTransaction
BonusTransaction {
  id: uuid
  userId: uuid
  type: 'earn' | 'spend' | 'expire'
  amount: int
  reason: string        // daily_streak, partner_service
  referenceType: string | null
  referenceId: uuid | null
  createdAt: timestamp
}

üîπ –ü–æ—á–µ–º—É —ç—Ç–æ –∫—Ä–∏—Ç–∏—á–Ω–æ

–ú–æ–∂–Ω–æ –ø–ª–∞—Ç–∏—Ç—å –∫—É—Ä—å–µ—Ä—É –±–æ–Ω—É—Å–∞–º–∏

–ú–æ–∂–Ω–æ –æ–ø–ª–∞—á–∏–≤–∞—Ç—å –ø–∞—Ä—Ç–Ω—ë—Ä–æ–≤

–ú–æ–∂–Ω–æ —Å—Ç–∏–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –Ω—É–∂–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ

–ú–æ–∂–Ω–æ –º–æ–Ω–µ—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤–Ω–µ –º—É—Å–æ—Ä–∞

5Ô∏è‚É£ –ü–æ–¥–ø–∏—Å–∫–∏: –Ω–µ –∫–∞–∫ ¬´–ø–∞–∫–µ—Ç¬ª, –∞ –∫–∞–∫ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Å–æ–±—ã—Ç–∏–π

–ù–µ –ø—Ä–æ—Å—Ç–æ Subscription ‚Üí Orders
–ê Subscription ‚Üí Rules ‚Üí Events

üîπ Subscription
Subscription {
  id: uuid
  userId: uuid
  planId: uuid
  status: active | paused | cancelled
  startedAt
  nextBillingAt
}

üîπ SubscriptionRule
SubscriptionRule {
  subscriptionId
  type: 'daily' | 'weekdays' | 'custom'
  timeWindow
  priceModifier     // +0 / +shabbat / +night
}


üìå –≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç:

–≥–∏–±–∫–∏–µ –ø–ª–∞–Ω—ã

—à–∞–±–±–∞—Ç –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—É—é –ª–æ–≥–∏–∫—É

dynamic pricing –ø–æ–∑–∂–µ

6Ô∏è‚É£ Marketplace / Partner API (–∑–∞–≥–ª—É—à–∫–∞ –°–ï–ô–ß–ê–°)

–î–∞–∂–µ –µ—Å–ª–∏ –Ω–µ—Ç –ø–∞—Ä—Ç–Ω—ë—Ä–æ–≤.

üîπ Partner
Partner {
  id
  name
  category      // cleaning, pets, moving
  status
}

üîπ PartnerOffer
PartnerOffer {
  id
  partnerId
  titleKey
  descriptionKey
  price
  bonusPrice
  availableForSegments: string[]
}


üìå –ü–æ–∑–∂–µ:

—Ö–∏–º—á–∏—Å—Ç–∫–∞

–∫–ª–∏–Ω–∏–Ω–≥

pet services

–¥–æ—Å—Ç–∞–≤–∫–∞ –≤–æ–¥—ã

—Å—Ç—Ä–∞—Ö–æ–≤–∫–∏

–∏–Ω—Ç–µ—Ä–Ω–µ—Ç / —Å–æ—Ç–æ–≤–∞—è —Å–≤—è–∑—å

7Ô∏è‚É£ –§–∏–Ω–∞–Ω—Å–æ–≤–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ (–ù–ï –±—É—Ö–≥–∞–ª—Ç–µ—Ä–∏—è)

–¢–µ–±–µ –Ω—É–∂–µ–Ω —é–Ω–∏—Ç-—ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–π —Å–ª–æ–π

üîπ OrderFinanceSnapshot
OrderFinanceSnapshot {
  orderId
  clientPrice
  courierPayout
  bonusSpent
  margin
  createdAt
}


–≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç:

–ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –∏–Ω–≤–µ—Å—Ç–æ—Ä—É —ç–∫–æ–Ω–æ–º–∏–∫—É

A/B —Ü–µ–Ω—ã

—Å–µ–≥–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–±—ã–ª—å–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤